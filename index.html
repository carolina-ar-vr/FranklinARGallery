<html>
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <!-- we import arjs version without NFT but with marker + location based support -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

  <script>

    //new location markers can be added by copy and pasting the <a-image> entities
    //and filling in with appropriate lat, long, and business name

    let locationCode =  `
    <div class="buttons">
      <button class="my-button" onclick="toggleMode()">Interact With A Marker</button>
      <button class="my-button" onclick="redirect()">App Website</button>
    </div>

    <a-scene
    vr-mode-ui="enabled: false;" 
    embedded arjs='sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>

            <a-image
            src="https://cdn4.iconfinder.com/data/icons/basic-ui-pack-flat-s94-1/64/Basic_UI_Icon_Pack_-_Flat_map_pointer-512.png"
            look-at="[gps-camera]"
            scale="3 3 3"
            gps-entity-place="latitude: 35.904809; longitude: -79.068650;"
            opacity = .9
            >
                <a-text
                value = "Micah's Neighbor"
                position = "-.25 .8 0"
                >    
                </a-text>
            </a-image>

            <a-image
            src="https://cdn4.iconfinder.com/data/icons/basic-ui-pack-flat-s94-1/64/Basic_UI_Icon_Pack_-_Flat_map_pointer-512.png"
            look-at="[gps-camera]"
            scale="3 3 3"
            gps-entity-place="latitude: 35.9114784; longitude: -79.0606283;"
            opacity = .9
            >
                <a-text
                value = "Cha House"
                position = "-.25 .8 0"
                >    
                </a-text>
            </a-image>

            <a-image
            src="https://cdn4.iconfinder.com/data/icons/basic-ui-pack-flat-s94-1/64/Basic_UI_Icon_Pack_-_Flat_map_pointer-512.png"
            look-at="[gps-camera]"
            scale="3 3 3"
            gps-entity-place="latitude: 35.90449523925781; longitude: -79.06790924072266;"
            opacity = .9
            >
                <a-text
                value = "Purple Bowl"
                position = "-.25 .8 0"
                >    
                </a-text>
            </a-image>
            
        <a-camera gps-camera rotation-reader> </a-camera>
    </a-scene>
    `;

    //the following string should be the same as the default <body> content on page load.

    let markerCode =  `
    <div class="buttons">
      <button class="my-button" onclick="toggleMode()">Find More Markers</button>
      <button class="my-button" onclick="redirect()">App Website</button>
    </div>

      <a-scene
      vr-mode-ui="enabled: false;" 
      embedded arjs='sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>

        <!-- handle hiro marker -->
        <a-marker preset='hiro'>
          <a-box position='0 0.5 0' material='opacity: 0.5; side: double;color:red;'>
            <a-torus-knot radius='0.26' radius-tubular='0.05'
            animation="property: rotation; to:360 0 0; dur: 5000; easing: linear; loop: true">
            </a-torus-knot>
          </a-box>
        </a-marker>
    
        <!-- handle kanji marker -->
        <a-marker preset='kanji'>
          <a-box position='0 0.5 0' material='opacity: 0.5; side: double;color:green;'>
            <a-torus-knot radius='0.26' radius-tubular='0.05'
            animation="property: rotation; to:360 0 0; dur: 5000; easing: linear; loop: true">
            </a-torus-knot>
          </a-box>
        </a-marker>

        <!-- handle CARVR marker *using temporary assets repo* -->
        <a-marker type='pattern' url='https://arjs-cors-proxy.herokuapp.com/https://raw.githack.com/carolina-ar-vr/FranklinARGallery/erevis/assets/patts/pattern-CARVR_MARKER.patt'>
          <a-entity
          position="0 1.5 0"
          scale="0.8 0.8 0.8"
          rotation="90 180 0"
          gltf-model="https://arjs-cors-proxy.herokuapp.com/https://raw.githack.com/carolina-ar-vr/FranklinARGallery/erevis/assets/models/frame/scene.gltf"
          >
            <a-image src="https://arjs-cors-proxy.herokuapp.com/https://raw.githack.com/carolina-ar-vr/FranklinARGallery/erevis/assets/images/starry-night.jpg"
            width="1.8"
            >
            </a-image> 
          </a-entity>
        </a-marker>
    
        <!-- add a simple camera -->
        <a-entity camera></a-entity>
      </a-scene>
    `;

    //initialize HTML content on page

    function initialize() {

      let main = document.getElementById("main");
      main.innerHTML = markerCode;
    }

    //this function enables toggling of AR modes by button press

    function toggleMode() {

      let main = document.getElementById("main");

          if(main.classList.contains('default')){
            main.classList.remove('default')
            main.innerHTML = locationCode;
          }else{
            main.classList.add('default')
            main.innerHTML = markerCode;
          }

    };

    //this sends users to a static web page with project/team details

    function redirect() {
      window.location.href = "about";
    }

  </script>
  <style>

    .buttons {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 10em;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10;
      
    }

    .my-button {
      opacity: 0.7;
      font-size: 18px;
      padding: 0.55em;
      border-radius: 4px;
      border: none;
      background: dark-grey;
      color: black;
      margin: 10px;
    }
  
  </style>

  <body style='margin : 0px; overflow: hidden; font-family: Monospace;' onload="initialize()">

    <div id="main" class="default">
    </div>

  </body>
</html>